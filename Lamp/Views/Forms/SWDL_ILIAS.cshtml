@{
    ViewData["Title"] = "E-Certification for SW Download";
}


<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <link href="~/assets/EliasForm/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.css" />
    <link href="~/assets/EliasForm/css/mdb.min.css" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="~/assets/stencil_v1/style.css">
    <link href="~/assets/Swdl/main.css" rel="stylesheet" />
</head>
<body>
    <header>
        <div class="container">
            <div class="branding">
                <img src="~/assets/img/juniper-logo-white.svg" width="166" height="54" border="0" alt="Juniper Networks" title="Juniper Networks" />
            </div>
        </div>
    </header>
    <div id="main-container">
        <div class="header-title text-center">
            <h2 class="font-bold">E-Certificate for Standard Junos Image Download (EAEU-only)</h2>
            <p>(and related Undertaking re EAEU encryption import controls)</p>
        </div>
        <form name="swdlForm" novalidate>
            <div class="row setup-content-2" id="step-3" style="margin-top: -50px;">
                <div class="col-md-12">
                    <section>
                        <p>
                            <strong>Instructions :</strong>
                            <ul>
                                <li> This E-Certificate must be completed by an authorized channel partner or end-user (as applicable, herein referred to as the “<strong><span class="underlined">Certifier</span></strong>”) registered with Juniper for use of its online self-service resources to which it or its downstream end user customer is entitled under a warranty or service contract (that is/was furnished by or entered into with either Juniper or a Juniper-authorized Support Service Partner (“JSSP”) and that covers the hardware system or line card designated in Appendix A).  (Such covered hardware system is referred to herein as “<strong><span class="underlined">Covered Product.</span></strong>”)</li>
                                <li>The purpose of this E-Certificate is to enable Juniper Trade Compliance to determine whether certifying party can be given temporary access to download a “standard” image of Junos operating system for installation and use on specified Juniper products located in the Eurasian Economic Union (comprising Russian Federation, Armenia, Belarus, Kazakhstan and Kyrgyzstan) (the “<strong><span class="underlined">EAEU</span></strong>”).  Juniper Trade Compliance shall base its decision on whether, given the information provided here, there is any reason to believe that the certifier’s access to and use of the standard Junos image would be inconsistent with EAEU encryption import and use controls.  Once the Certifier has completed, signed, and submitted this E-Certificate, Juniper Trade Compliance will determine whether it can give a registered account holder contact with access to Juniper’s self-service software download site access to the image(s) of standard Junos software identified in this E-Certificate.  Juniper Trade Compliance will endeavor to respond by the end of the business day following the day on which the completed E-Certificate is submitted by the end-user. <strong><span class="red">Please feel free to send any questions about this form via email addressed to <a href="mailto:tradecompliance-swdl@juniper.net">tradecompliance-swdl@juniper.net</a> with the subject line “URGENT: E-Certificate for Standard Junos Image Download.”</span></strong></li>
                            </ul>

                        </p>
                        @*<h2 class="panel panel-heading">I.	Certifier (either the Juniper authorized channel partner reselling the Covered Product into the EAEU or the End-User purchaser of the Covered Product)</h2>*@
                        @*<div id="basic-info">
                                <span style="width: auto;margin-left: 10px;margin-right: 97px;margin-bottom: 15px">Channel Partner*</span>
                                <input type="radio" name="webcheck" value="yes" ng-model="swdl.channelptnr" required> Yes
                                <input type="radio" name="webcheck" value="no" ng-model="swdl.channelptnr" required> No
                                <span style="color:red" ng-if="!formValid && swdlForm.webcheck.$invalid ">&nbsp;&nbsp; Please Select One.</span>
                            </div>*@

                        <div class="panel panel-default">
                            <div class="panel-heading">I. Channel Partner (either the Juniper authorized channel partner reselling the Covered Product into the EAEU or the End-User purchaser of the Covered Product)):</div>
                            <div class="panel-body">

                                <div id="basic-info">
                                    <div class="row">
                                        <div class="col-md-6">
                                            <label>
                                                <span>Company Name* </span>
                                                <input type="text" name="Cert_Comp_Name" ng-model="swdl.Cert_Comp_Name" placeholder="Company Name" required>
                                            </label>
                                            <span ng-show="!formValid && swdlForm.Cert_Comp_Name.$invalid "></span>
                                            <span style="color:red;text-align:center" ng-show="!formValid && swdlForm.Cert_Comp_Name.$invalid "><span ng-show="swdlForm.Cert_Comp_Name.$error.required">Company Name is required.</span></span>
                                            <label>
                                                <span>Address*</span>
                                                <input type="text" name="Cert_Address" ng-model="swdl.Cert_Address" placeholder="City, Oblast/Republic/District/Province, Postal Code, Country" required>
                                            </label>
                                            <span ng-show="!formValid && swdlForm.Cert_Address.$invalid "></span>
                                            <span style="color:red;text-align:center" ng-show="!formValid && swdlForm.Cert_Address.$invalid "><span ng-show="swdlForm.Cert_Address.$error.required">Address is required.</span></span>
                                            <label>
                                                <span>Phone No</span>
                                                <input type="text" name="Cert_Phone_No" placeholder="Phone No" ng-model="swdl.Cert_Phone_No" required>
                                            </label>
                                            <span ng-show="!formValid && swdlForm.Cert_Phone_No.$invalid "></span>
                                            <span style="color:red;text-align:center" ng-show="!formValid && swdlForm.Cert_Phone_No.$invalid "><span ng-show="swdlForm.Cert_Phone_No.$error.required">Phone No is required.</span></span>
                                        </div>
                                        <div class="col-md-6">
                                            <label>
                                                <span>Contact Person Name*</span>
                                                <input type="text" name="Cert_Contact_Name" placeholder="Contact Person Name" ng-model="swdl.Cert_Contact_Name" required>
                                            </label>
                                            <span ng-show="!formValid && swdlForm.Cert_Contact_Name.$invalid "></span>
                                            <span style="color:red;text-align:center" ng-show="!formValid && swdlForm.Cert_Contact_Name.$invalid "><span ng-show="swdlForm.Cert_Contact_Name.$error.required">Contact Person Name is required.</span></span>
                                            <label>
                                                <span>Email address for notices*</span>
                                                <input type="text" name="Cert_Email_Notice" placeholder="Email Address" ng-model="swdl.Cert_Email_Notice" required>
                                            </label>
                                            <span ng-show="!formValid && swdlForm.Cert_Email_Notice.$invalid "></span>
                                            <span style="color:red;text-align:center" ng-show="!formValid && swdlForm.Cert_Email_Notice.$invalid "><span ng-show="swdlForm.Cert_Email_Notice.$error.required">Email is required.</span></span>
                                            <label>
                                                <span>Contact Person Email*</span>
                                                <input type="text" name="Cert_Contact_Person_Email" placeholder="Email Address" ng-model="swdl.Cert_Contact_Person_Email" required>
                                            </label>
                                            <span ng-show="!formValid && swdlForm.Cert_Contact_Person_Email.$invalid "></span>
                                            <span style="color:red;text-align:center" ng-show="!formValid && swdlForm.Cert_Contact_Person_Email.$invalid "><span ng-show="swdlForm.Cert_Contact_Person_Email.$error.required">Email is required.</span></span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="panel panel-default">
                            <div class="panel-heading">II. End User (if different)</div>
                            <div class="panel-body">

                                <div id="basic-info">
                                    <div class="row">
                                        <div class="col-md-6">
                                            <label>
                                                <span>End User Name* </span>
                                                <input type="text" name="End_User_Name" ng-model="swdl.End_User_Name" placeholder="End User Name" required>
                                            </label>
                                            <span ng-show="!formValid && swdlForm.End_User_Name.$invalid "></span>
                                            <span style="color:red;text-align:center" ng-show="!formValid && swdlForm.End_User_Name.$invalid "><span ng-show="swdlForm.End_User_Name.$error.required">End User Name is required.</span></span>
                                            <label>
                                                <span>Address*</span>
                                                <input type="text" name="End_User_Address" ng-model="swdl.End_User_Address" placeholder="City, Oblast/Republic/District/Province, Postal Code, Country" required>
                                            </label>
                                            <span ng-show="!formValid && swdlForm.End_User_Address.$invalid "></span>
                                            <span style="color:red;text-align:center" ng-show="!formValid && swdlForm.End_User_Address.$invalid "><span ng-show="swdlForm.End_User_Address.$error.required">Address is required.</span></span>
                                            <label>
                                                <span>WebSite*</span>
                                                <input type="text" name="End_User_Website" placeholder="WebSite" ng-model="swdl.End_User_Website" required>
                                            </label>
                                            <span ng-show="!formValid && swdlForm.End_User_Website.$invalid "></span>
                                            <span style="color:red;text-align:center" ng-show="!formValid && swdlForm.End_User_Website.$invalid "><span ng-show="swdlForm.End_User_Website.$error.required">End User Website is required.</span></span>
                                        </div>
                                        <div class="col-md-6">
                                            <label>
                                                <span>Phone No</span>
                                                <input type="text" name="End_User_Phone" placeholder="Phone No" ng-model="swdl.End_User_Phone" required>
                                            </label>
                                            <span ng-show="!formValid && swdlForm.End_User_Phone.$invalid "></span>
                                            <span style="color:red;text-align:center" ng-show="!formValid && swdlForm.End_User_Phone.$invalid "><span ng-show="swdlForm.End_User_Phone.$error.required">End User Phone No is required.</span></span>
                                            <label>
                                                <span>End-User Contact Person Name*</span>
                                                <input type="text" name="End_User_Contact_Name" placeholder="Contact Person Name" ng-model="swdl.End_User_Contact_Name" required>
                                            </label>
                                            <span ng-show="!formValid && swdlForm.End_User_Contact_Name.$invalid "></span>
                                            <span style="color:red;text-align:center" ng-show="!formValid && swdlForm.End_User_Contact_Name.$invalid "><span ng-show="swdlForm.End_User_Contact_Name.$error.required">End User Contact Name is required.</span></span>
                                            <label>
                                                <span>Contact Email Address*</span>
                                                <input type="text" name="End_User_Contact_Email" placeholder="(Must be email address on end-user email domain)" ng-model="swdl.End_User_Contact_Email" required>
                                            </label>
                                            <span ng-show="!formValid && swdlForm.End_User_Contact_Email.$invalid "></span>
                                            <span style="color:red;text-align:center" ng-show="!formValid && swdlForm.End_User_Contact_Email.$invalid "><span ng-show="swdlForm.End_User_Contact_Email.$error.required">End User Contact Email is required.</span></span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="panel panel-default">
                            <div class="panel-heading">III. Certification as to Covered Hardware</div>
                            <div class="panel-body">
                                <p>The undersigned, as authorized representative of Certifier, hereby certifies that the following are true and correct:</p>
                                <div id="">

                                    <ul>
                                        <li>
                                            The facts set forth above and in <strong><span class="underlined">Appendix A</span></strong> (which is attached hereto and incorporated herein) are current, accurate and complete.
                                        </li>
                                        <li>
                                            <strong><span class="underlined">Appendix A</span></strong> lists all hardware (herein, the “<strong><span class="underlined">Covered Product</span></strong>”) on which the End-User will install the standard Junos image(s) to be downloaded.
                                        </li>
                                        <li>
                                            All Covered Product was imported into the EAEU under import license or internal use import permit identified in <strong><span class="underlined">Appendix A</span></strong> except for those purchased by End-User before 2022.
                                        </li>
                                        <li>
                                            As to all Covered Product purchased by End-User before 2022, End User is using the Covered Product solely for its internal purposes under government issued encryption product internal use permit.
                                        </li>
                                    </ul>

                                </div>
                            </div>
                        </div>

                        <div class="panel panel-default">
                            <div class="panel-heading">IV.	Undertaking</div>
                            <div class="panel-body">
                                <p>Certifier hereby agrees to the following in connection with the Covered Equipment:</p>
                                <div id="">

                                    <ul>
                                        <li>
                                            Certifier shall not use the downloaded standard Junos images on any system other than a Covered Product identified by serial number and model # in <strong><span class="underlined">Appendix A</span></strong>.
                                        </li>
                                        <li>
                                            Certifier hereby undertakes to retain and archive for later inspection and copying by Juniper at any time within 3 years of expiration of the service contract or warranty with respect to which Certifier is submitting this Certificate, all licenses, permits, and bills of entry, and equipment inventory records pertaining to the Covered Product, its importation into the EAEU and its installation site.
                                        </li>
                                        <li>
                                            If at any time following Certifier signature of this Certificate any facts or circumstances change such that the certification could not truthfully be made as of such later date, then Certifier agrees to promptly notify Juniper by email sent to <a href="mailto:tradecompliance-swdl@juniper.net">tradecompliance-swdl@juniper.net</a> using the subject line: “<span class="underlined">URGENT: Update of EAEU Junos Limited Use Certificate required</span>” and describing the details of any such change changed facts or circumstances.
                                        </li>
                                        <li>
                                            (If Certifier is not the End-User) Certifier shall obtain End-User’s signed, written certification to the accuracy of the contents of this Certificate (including Parts II and III), above, and of <strong><span class="underlined">Appendix A</span></strong> and End-User’s written undertaking to abide by the terms of all provisions of the undertakings set forth in this Part IV all as though the End-User were the named Certifier hereto.
                                        </li>
                                    </ul>

                                </div>
                            </div>
                        </div>

                        <div id="basic-info" class="row">
                            <div class="col-md-3">
                                <label>
                                    <input type="text" class="signature" id="signature" name="Signature" ng-model="swdl.Signature" placeholder="Signature" required />
                                    <span ng-show="!formValid && swdlForm.Signature.$invalid "></span>
                                    <span style="color:red;text-align:center" ng-show="!formValid && swdlForm.Signature.$invalid "><span ng-show="swdlForm.Signature.$error.required">Signature is required.</span></span>
                                </label>
                            </div>
                            <div class="col-md-3 col-md-push-7">
                                <label>
                                    <input type="date" name="Dated" disabled class="signature" id="signature" ng-model="swdl.Dated" placeholder="Dated" required>
                                </label>
                                <span ng-show="!formValid && swdlForm.Dated.$invalid "></span>
                                <span style="color:red;text-align:center" ng-show="!formValid && swdlForm.Dated.$invalid "><span ng-show="swdlForm.Dated.$error.required">Dated is required.</span></span>
                            </div>
                        </div>

                        <div class="panel panel-default">
                            <div class="panel-heading">Appendix A to E-Certificate for Standard Junos Image Download</div>
                            <div class="panel-body">
                                <div class="panel panel-default" ng-repeat="(pIndex,dt) in sites">
                                    <div class="panel-heading">
                                        INSTALLATION SITE {{pIndex + 1}} (Facility name (incl building # or name):
                                        <button ng-if="pIndex > 0" type="button" class="close float-right" aria-label="Close" ng-click="deleteSite(pIndex)">
                                            <span aria-hidden="true">&times;</span>
                                        </button>
                                    </div>
                                    <div class="panel-body">
                                        <div id="basic-info">
                                            <div>
                                                <div class="col-md-6">
                                                    <label>
                                                        <span>Street Address of End User Installation Site* </span>
                                                        <input type="text" name="Inst_Addresss{{pIndex}}" ng-model="dt.Inst_Addresss" placeholder="Certificate WILL be rejected if Channel partner location is used here." required>
                                                    </label>
                                                    <span ng-show="!formValid && swdlForm.Inst_Addresss{{pIndex}}.$invalid "></span>
                                                    <span style="color:red;text-align:center" ng-show="!formValid && swdlForm.Inst_Addresss{{pIndex}}.$invalid "><span ng-show="swdlForm.Inst_Addresss{{pIndex}}.$error.required">Street Address is required.</span></span>
                                                    <label>
                                                        <span>Province, Oblast, Republic, District, etc.*</span>
                                                        <input type="text" name="Inst_Province{{pIndex}}" ng-model="dt.Inst_Province" placeholder="Province, Oblast, Republic, District, etc." required>
                                                    </label>
                                                    <span ng-show="!formValid && swdlForm.Inst_Province{{pIndex}}.$invalid "></span>
                                                    <span style="color:red;text-align:center" ng-show="!formValid && swdlForm.Inst_Province{{pIndex}}.$invalid "><span ng-show="swdlForm.Inst_Province{{pIndex}}.$error.required">Address is required.</span></span>
                                                </div>
                                                <div class="col-md-6">
                                                    <label>
                                                        <span>Postal Code*</span>
                                                        <input type="text" required name="Inst_Postal{{pIndex}}" placeholder="Postal Code" ng-model="dt.Inst_Postal">
                                                    </label>
                                                    <span ng-show="!formValid && swdlForm.Inst_Postal{{pIndex}}.$invalid "></span>
                                                    <span style="color:red;text-align:center" ng-show="!formValid && swdlForm.Inst_Postal{{pIndex}}.$invalid "><span ng-show="swdlForm.Inst_Postal{{pIndex}}.$error.required">Postal Code is required.</span></span>
                                                    <label>
                                                        <span>Country*</span>
                                                        <input type="text" name="Inst_Country{{pIndex}}" placeholder="Country" ng-model="dt.Inst_Country" required="">
                                                    </label>
                                                    <span ng-show="!formValid && swdlForm.Inst_Country{{pIndex}}.$invalid "></span>
                                                    <span style="color:red;text-align:center" ng-show="!formValid && swdlForm.Inst_Country{{pIndex}}.$invalid "><span ng-show="swdlForm.Inst_Country{{pIndex}}.$error.required">Country is required.</span></span>
                                                </div>
                                                <table id="table" class="table table-bordered">
                                                    <caption>
                                                        <span><strong>Covered Equipment at Installation site</strong></span>
                                                        <button type="button" class="glyphicon glyphicon-plus" ng-click="addRow(pIndex)" data-toggle="tooltip" data-placement="top" title="Add Row"></button>
                                                    </caption>

                                                    <colgroup span="4"></colgroup>
                                                    <colgroup span="3"></colgroup>

                                                    <thead class="table-light">
                                                        <tr>
                                                            <th rowspan="2">Item</th>
                                                            <th rowspan="2">
                                                                Hardware Product SKU Covered Product
                                                                Model #/SKU
                                                            </th>
                                                            <th rowspan="2">Strd Junos Image</th>
                                                            <th rowspan="2">
                                                                Covered Product Serial #
                                                                (for config’d system include BOTH routing engine ser.# AND chassis ser.#;
                                                                for covered line card include line card ser.# AND chassis ser.#)
                                                            </th>
                                                            <th rowspan="2">
                                                                End User Purch. Order for Covered Product
                                                                (include P.O. Number, seller name and P.O. Date)
                                                            </th>
                                                            <th colspan="3" scope="colgroup" class="text-center">Import License/Internal Use Import Permit</th>
                                                            <th rowspan="2">License/permit applicant</th>
                                                            <th rowspan="2">Named Purchaser/End User in license</th>
                                                            <th rowspan="2">&nbsp;</th>
                                                        </tr>
                                                        <tr>

                                                            <th scope="col">License or Permit</th>
                                                            <th scope="col">Issuance Date</th>
                                                            <th scope="col">Expiration Date</th>

                                                        </tr>
                                                    </thead>
                                                    <tbody>
                                                        <tr ng-repeat="item in dt.equipments">
                                                            <td>{{$index+1}}</td>
                                                            <td>
                                                                <input type="text" name="hardwareSku{{$index}}" ng-model="item.hardwareSku" required />
                                                                <span ng-show="!formValid && swdlForm.hardwareSku{{$index}}.$invalid "></span>
                                                                <span style="color: red; text-align: center" ng-show="!formValid && swdlForm.hardwareSku{{$index}}.$invalid "><span ng-show="swdlForm.hardwareSku{{$index}}.$error.required">Field is required.</span></span>
                                                            </td>
                                                            <td>
                                                                <input type="text" name="junousImage{{$index}}" ng-model="item.junousImage" required />
                                                                <span ng-show="!formValid && swdlForm.junousImage{{$index}}.$invalid "></span>
                                                                <span style="color: red; text-align: center" ng-show="!formValid && swdlForm.junousImage{{$index}}.$invalid "><span ng-show="swdlForm.junousImage{{$index}}.$error.required">Field is required.</span></span>
                                                            </td>
                                                            <td>
                                                                <input type="text" name="productSerial{{$index}}" ng-model="item.productSerial" required />
                                                                <span ng-show="!formValid && swdlForm.productSerial{{$index}}.$invalid "></span>
                                                                <span style="color: red; text-align: center" ng-show="!formValid && swdlForm.productSerial{{$index}}.$invalid "><span ng-show="swdlForm.productSerial{{$index}}.$error.required">Field is required.</span></span>
                                                            </td>
                                                            <td>
                                                                <input type="text" name="purchOrder{{$index}}" ng-model="item.purchOrder" required />
                                                                <span ng-show="!formValid && swdlForm.purchOrder{{$index}}.$invalid "></span>
                                                                <span style="color: red; text-align: center" ng-show="!formValid && swdlForm.purchOrder{{$index}}.$invalid "><span ng-show="swdlForm.purchOrder{{$index}}.$error.required">Field is required.</span></span>
                                                            </td>
                                                            <td>
                                                                <input type="text" name="permit{{$index}}" ng-model="item.permit" required />
                                                                <span ng-show="!formValid && swdlForm.permit{{$index}}.$invalid "></span>
                                                                <span style="color: red; text-align: center" ng-show="!formValid && swdlForm.permit{{$index}}.$invalid "><span ng-show="swdlForm.permit{{$index}}.$error.required">Field is required.</span></span>
                                                            </td>
                                                            <td>
                                                                <input type="date" name="issueDate{{$index}}" ng-model="item.issueDate" required />
                                                                <span ng-show="!formValid && swdlForm.issueDate{{$index}}.$invalid "></span>
                                                                <span style="color: red; text-align: center" ng-show="!formValid && swdlForm.issueDate{{$index}}.$invalid "><span ng-show="swdlForm.issueDate{{$index}}.$error.required">Field is required.</span></span>
                                                            </td>
                                                            <td>
                                                                <input type="date" name="expDate{{$index}}" ng-model="item.expDate" required />
                                                                <span ng-show="!formValid && swdlForm.expDate{{$index}}.$invalid "></span>
                                                                <span style="color: red; text-align: center" ng-show="!formValid && swdlForm.expDate{{$index}}.$invalid "><span ng-show="swdlForm.expDate{{$index}}.$error.required">Field is required.</span></span>
                                                            </td>
                                                            <td>
                                                                <input type="text" name="permitApplicant{{$index}}" ng-model="item.permitApplicant" required />
                                                                <span ng-show="!formValid && swdlForm.permitApplicant{{$index}}.$invalid "></span>
                                                                <span style="color: red; text-align: center" ng-show="!formValid && swdlForm.permitApplicant{{$index}}.$invalid "><span ng-show="swdlForm.permitApplicant{{$index}}.$error.required">Field is required.</span></span>
                                                            </td>
                                                            <td>
                                                                <input type="text" name="namedPurchaser{{$index}}" ng-model="item.namedPurchaser" required />
                                                                <span ng-show="!formValid && swdlForm.namedPurchaser{{$index}}.$invalid "></span>
                                                                <span style="color: red; text-align: center" ng-show="!formValid && swdlForm.namedPurchaser{{$index}}.$invalid "><span ng-show="swdlForm.namedPurchaser{{$index}}.$error.required">Field is required.</span></span>
                                                            </td>
                                                            <td>
                                                                <button ng-if="$index > 0" type="button" class="close float-right" aria-label="Close" ng-click="deleteEquipment(pIndex,$index)">
                                                                    <span style="width: 100%" aria-hidden="true">&times;</span>
                                                                </button>
                                                            </td>
                                                        </tr>
                                                    </tbody>
                                                </table>
                                            </div>
                                            <button ng-click="addData()">Add New Site</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </section>
                    <div id="print-edit-footer">
                        <button id="print" class="btn btn-primary float-right" ng-click="save(swdlForm.$valid)">Submit</button>
                    </div>
                </div>
            </div>
        </form>
        <!-- SCRIPTS -->
        <!-- JQuery -->
        <script type="text/javascript" src="~/assets/EliasForm/js/jquery-3.3.1.min.js"></script>
        <!-- Bootstrap tooltips -->
        <script type="text/javascript" src="~/assets/EliasForm/js/popper.min.js"></script>
        <!-- MDB core JavaScript -->
        <script type="text/javascript" src="~/assets/EliasForm/js/mdb.min.js"></script>
        <script type="text/javascript" src="~/lib/signature_pad.umd.min.js"></script>
    </div>

    <!-- Modal -->
    <div class="modal" tabindex="-1" id="myModal" role="dialog">
        <div class="modal-dialog">

            <!-- Modal content-->
            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="modal-title">Sign</h4>
                </div>

                <div class="modal-body">
                    <div class="wrapper">
                        <canvas id="signature-pad" class="signature-pad"></canvas>
                    </div>
                </div>

                <div class="modal-footer">
                    <button class="btn btn-primary float-left" ng-click="save(swdlForm.$valid)">Submit</button>
                    <button class="btn btn-primary float-right" ng-click="signaturePad.clear();"></button>
                    <button class="btn btn-primary float-right">Cancel</button>
                </div>
            </div>

        </div>
    </div>
</body>
</html>
@section scripts{
    <script src="~/js/api/swdlform.js"></script>
    <script src="~/js/userProfile.js"></script>
    <script type="text/javascript">
        //var myApp = angular.module('myApp', [])
        myApp.controller("myCtrl", function ($scope, $filter, $http, $location, $uibModal) {

            var signaturePad = new SignaturePad(document.getElementById('signature-pad'), {
                backgroundColor: 'rgba(255, 255, 255, 0)',
                penColor: 'rgb(0, 0, 0)'
            });

            $scope.swdl = {}; $scope.formValid = true;
            $scope.swdl.Dated = new Date();
            $scope.sites = [{
                Inst_Addresss: "",
                Inst_Province: "",
                Inst_Postal: "",
                Inst_Country: "",
                equipments: [{}]
            }];
            //$scope.equipments = [{}];

            $scope.addData = function () {
                //Add the new item to the Array.
                var data = {};
                data.Inst_Addresss = "";
                data.Inst_Province = "";
                data.Inst_Postal = "";
                data.Inst_Country = "";
                data.equipments = [{}]
                $scope.sites.push(data);

            };

            $scope.save = function (form) {
                $scope.formValid = true;
                if (form != null && !form) {
                    $scope.formValid = false;
                }
                if (!form) {
                    Component.showError("Please Fill The Required Fields");
                    return;
                }
                $scope.swdl.Installation_Sites = $scope.sites;

                //userProfile.set('SwdlPreview', $scope.swdl);
                //Component.redirect("Swdl_Preview");

                //$scope.swdl.Signature = signaturePad.toDataURL('image/png');
                $scope.swdl.Installation_Sites = $scope.sites;
                Swdlform.SaveSwdl($scope.swdl).then(function (res) {
                    $scope.response = res;
                    if (res) {
                        var dataToSend = { 'Id': res.id, 'Encrypted': $scope.encrypt(res.id.toString(), $scope.password), 'End_User_Email': res.end_User_Contact_Email, 'Channel_User_Email': res.cert_Contact_Person_Email };
                        Component.showSuccess('Saved Successfully');
                        Swdlform.sendMail(dataToSend).then(function (response) {
                            console.log('Mail Sent' + response);
                            $scope.submission();
                        });
                    }
                    $scope.swdl = {};
                    $scope.sites = [{
                        Inst_Addresss: "",
                        Inst_Province: "",
                        Inst_Postal: "",
                        Inst_Country: "",
                        equipments: [{}]
                    }];
                });
            }

            $scope.submission = function () {
                $scope.open = $uibModal.open({
                    templateUrl: 'Submission.html',
                    backdrop: false
                });
            }

            $scope.addRow = function (index) {
                //Add the new item to the Array.
                var equipment = {};

                $scope.sites[index].equipments.push(equipment);
            };

            $scope.deleteSite = function (index) {
                $scope.sites.splice(index, 1);
            }


            $scope.deleteEquipment = function (parentindex, index) {
                $scope.sites[parentindex].equipments.splice(index, 1);
            }

        });
    </script>

    <script type="text/ng-template" id="Submission.html">
        <div class="modal-header">
            <h4 class="modal-title" id="myModalLabel">Thank You !</h4>
        </div>
        <div class="modal-body text-center">
            <img src="../assets/img/truecheckacceptapprove.png" alt="" style="width: 100px;padding-bottom: 17px;" />
            <p class="lead">SWDL form successfully submitted. Thank you, You will receive an email from Trade Compliance Team shortly</p>
            <a href="@Url.Action("Swdl_Ilias", "Forms" )" class="rd_more btn btn-default">Go to Home</a>
        </div>

    </script>
}
